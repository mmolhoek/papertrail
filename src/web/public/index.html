<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Papertrail - GPS Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=DM+Mono:wght@400;500&family=Inter:wght@400;500;600&family=Orbitron:wght@400;500;700&family=Share+Tech+Mono&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/styles.css" />
    <!-- Leaflet CSS for drive navigation map -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
  </head>
  <body>
    <!-- Topographic Background Pattern -->
    <div class="topo-bg"></div>

    <div class="container">
      <!-- Header with Compass Rose -->
      <header class="header">
        <div class="compass-rose">
          <svg viewBox="0 0 100 100" class="compass-svg">
            <circle cx="50" cy="50" r="45" class="compass-outer" />
            <circle cx="50" cy="50" r="35" class="compass-inner" />
            <line x1="50" y1="5" x2="50" y2="20" class="compass-tick major" />
            <line x1="50" y1="80" x2="50" y2="95" class="compass-tick major" />
            <line x1="5" y1="50" x2="20" y2="50" class="compass-tick major" />
            <line x1="80" y1="50" x2="95" y2="50" class="compass-tick major" />
            <polygon points="50,15 45,45 50,40 55,45" class="compass-north" />
            <polygon points="50,85 45,55 50,60 55,55" class="compass-south" />
            <text x="50" y="12" class="compass-label">N</text>
          </svg>
        </div>
        <div class="header-text">
          <h1>Papertrail</h1>
          <p class="tagline">Expedition Command</p>
        </div>
      </header>

      <!-- Navigation Menu -->
      <nav class="nav-bar">
        <button id="menu-toggle" class="nav-toggle" aria-label="Menu">
          <span class="nav-icon"></span>
        </button>
        <div id="menu-content" class="nav-menu hidden">
          <button id="menu-status" class="nav-item" data-panel="status-panel">
            <span class="nav-item-icon">‚óé</span>
            <span class="nav-item-text">Status</span>
            <span id="status-indicator" class="nav-check hidden">‚úì</span>
          </button>
          <button
            id="menu-track-selection"
            class="nav-item active"
            data-panel="track-selection-panel"
          >
            <span class="nav-item-icon">‚óé</span>
            <span class="nav-item-text">Track</span>
            <span id="track-selection-indicator" class="nav-check">‚úì</span>
          </button>
          <button id="menu-drive" class="nav-item" data-panel="drive-panel">
            <span class="nav-item-icon">‚óé</span>
            <span class="nav-item-text">Drive</span>
            <span id="drive-indicator" class="nav-check hidden">‚úì</span>
          </button>
          <button
            id="menu-simulate"
            class="nav-item"
            data-panel="simulation-panel"
          >
            <span class="nav-item-icon">‚óé</span>
            <span class="nav-item-text">Simulate</span>
            <span id="simulate-indicator" class="nav-check hidden">‚úì</span>
          </button>
          <button
            id="menu-display-controls"
            class="nav-item"
            data-panel="display-controls-panel"
          >
            <span class="nav-item-icon">‚óé</span>
            <span class="nav-item-text">Display Controls</span>
            <span id="display-controls-indicator" class="nav-check hidden"
              >‚úì</span
            >
          </button>
          <button
            id="menu-wifi-settings"
            class="nav-item"
            data-panel="wifi-settings-panel"
          >
            <span class="nav-item-icon">‚óé</span>
            <span class="nav-item-text">WiFi Settings</span>
            <span id="wifi-settings-indicator" class="nav-check hidden">‚úì</span>
          </button>
          <button id="menu-reset" class="nav-item" data-panel="reset-panel">
            <span class="nav-item-icon">‚óé</span>
            <span class="nav-item-text">Reset</span>
            <span id="reset-indicator" class="nav-check hidden">‚úì</span>
          </button>
          <button
            id="menu-mock-display"
            class="nav-item"
            data-panel="mock-display-panel"
          >
            <span class="nav-item-icon">‚óé</span>
            <span class="nav-item-text">Mock Display</span>
            <span id="mock-display-indicator" class="nav-check hidden">‚úì</span>
          </button>
        </div>
      </nav>

      <main class="main-content">
        <!-- Status Panel - Aviation Instrument Style -->
        <section
          class="panel-card instrument-panel status-instrument-panel hidden"
          id="status-panel"
        >
          <div class="instrument-clusters">
            <!-- Primary Position Display - GPS/INS Style -->
            <div class="position-instrument">
              <div class="position-display-frame">
                <div class="position-display-bezel">
                  <div class="position-display-screen">
                    <!-- GPS Status Indicator -->
                    <div class="gps-signal-indicator">
                      <span class="signal-icon" id="gps-pulse">‚óè</span>
                      <span class="signal-status" id="gps-status-mini"
                        >ACQUIRING</span
                      >
                    </div>

                    <!-- Coordinate Readouts -->
                    <div class="coord-readout-group">
                      <div class="coord-readout lat">
                        <span class="coord-prefix">LAT</span>
                        <span class="coord-digits" id="latitude"
                          >--¬∞--'--"</span
                        >
                        <span class="coord-hemisphere" id="lat-hemisphere"
                          >N</span
                        >
                      </div>
                      <div class="coord-readout lon">
                        <span class="coord-prefix">LON</span>
                        <span class="coord-digits" id="longitude"
                          >---¬∞--'--"</span
                        >
                        <span class="coord-hemisphere" id="lon-hemisphere"
                          >E</span
                        >
                      </div>
                    </div>

                    <!-- Altitude Tape -->
                    <div class="altitude-tape">
                      <div class="tape-label">ALT</div>
                      <div class="tape-value" id="altitude">----</div>
                      <div class="tape-unit">M</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Satellite & Signal Quality Gauges -->
            <div class="signal-gauges-row">
              <!-- Satellite Count Gauge -->
              <div class="mini-gauge satellite-gauge">
                <div class="mini-gauge-frame">
                  <svg viewBox="0 0 80 80" class="mini-gauge-svg">
                    <defs>
                      <linearGradient
                        id="sat-gauge-bg"
                        x1="0%"
                        y1="0%"
                        x2="0%"
                        y2="100%"
                      >
                        <stop offset="0%" style="stop-color: #1a2a24" />
                        <stop offset="100%" style="stop-color: #0d1512" />
                      </linearGradient>
                    </defs>
                    <!-- Gauge background -->
                    <circle cx="40" cy="40" r="36" class="mini-gauge-bezel" />
                    <circle cx="40" cy="40" r="32" class="mini-gauge-face" />
                    <!-- Signal arc background -->
                    <path
                      d="M 12 40 A 28 28 0 0 1 68 40"
                      class="signal-arc-bg"
                    />
                    <!-- Signal arc filled -->
                    <path
                      d="M 12 40 A 28 28 0 0 1 68 40"
                      class="signal-arc"
                      id="sat-signal-arc"
                    />
                    <!-- Satellite icon -->
                    <text x="40" y="52" class="gauge-icon">üì°</text>
                  </svg>
                  <div class="mini-gauge-readout">
                    <span class="readout-value" id="satellites">0</span>
                    <span class="readout-label">SATS</span>
                  </div>
                </div>
              </div>

              <!-- HDOP Quality Gauge -->
              <div class="mini-gauge hdop-gauge">
                <div class="mini-gauge-frame">
                  <svg viewBox="0 0 80 80" class="mini-gauge-svg">
                    <!-- Gauge background -->
                    <circle cx="40" cy="40" r="36" class="mini-gauge-bezel" />
                    <circle cx="40" cy="40" r="32" class="mini-gauge-face" />
                    <!-- Quality segments -->
                    <path
                      d="M 12 40 A 28 28 0 0 1 26 18"
                      class="quality-arc excellent"
                    />
                    <path
                      d="M 26 18 A 28 28 0 0 1 54 18"
                      class="quality-arc good"
                    />
                    <path
                      d="M 54 18 A 28 28 0 0 1 68 40"
                      class="quality-arc poor"
                    />
                    <!-- Needle -->
                    <g class="hdop-needle-group" id="hdop-needle">
                      <line
                        x1="40"
                        y1="40"
                        x2="40"
                        y2="16"
                        class="hdop-needle"
                      />
                      <circle cx="40" cy="40" r="4" class="needle-cap-small" />
                    </g>
                  </svg>
                  <div class="mini-gauge-readout">
                    <span class="readout-value" id="gps-hdop">--</span>
                    <span class="readout-label">HDOP</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Status Annunciator Panel -->
            <div class="annunciator-panel">
              <div class="annunciator-label-plate">SYSTEM STATUS</div>
              <div class="annunciator-grid">
                <div class="annunciator-lamp" id="ann-gps">
                  <span class="lamp-indicator"></span>
                  <span class="lamp-label">GPS</span>
                  <span class="lamp-value" id="gps-status">INIT</span>
                </div>
                <div class="annunciator-lamp" id="ann-fix">
                  <span class="lamp-indicator"></span>
                  <span class="lamp-label">FIX</span>
                  <span class="lamp-value" id="gps-fix-status">NONE</span>
                </div>
                <div class="annunciator-lamp" id="ann-display">
                  <span class="lamp-indicator"></span>
                  <span class="lamp-label">DISP</span>
                  <span class="lamp-value" id="display-status">STBY</span>
                </div>
              </div>
            </div>

            <!-- Active Flight Plan / Track -->
            <div class="flight-plan-display">
              <div class="fp-label-plate">ACTIVE ROUTE</div>
              <div class="fp-content">
                <div class="fp-icon">‚ñ∏</div>
                <div class="fp-track-name" id="active-track">
                  NO ROUTE LOADED
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- GPX Track Selection Panel -->
        <!-- Track Selection Panel -->
        <section class="panel-card instrument-panel" id="track-selection-panel">
          <div class="instrument-clusters">
            <!-- Track Selector -->
            <div class="data-selector-cluster">
              <div class="cluster-label">SELECT ROUTE</div>
              <div class="instrument-select-wrapper">
                <select id="track-select" class="instrument-select">
                  <option value="">-- NO ROUTE SELECTED --</option>
                </select>
                <span class="instrument-select-indicator"></span>
              </div>
            </div>

            <!-- Track Actions -->
            <div class="action-cluster">
              <div class="cluster-label">FILE OPERATIONS</div>
              <div class="instrument-btn-row">
                <button id="upload-track-btn" class="instrument-btn upload">
                  <span class="instrument-btn-icon">‚Üë</span>
                  <span class="instrument-btn-label">UPLOAD</span>
                </button>
                <button id="delete-track-btn" class="instrument-btn danger">
                  <span class="instrument-btn-icon">√ó</span>
                  <span class="instrument-btn-label">DELETE</span>
                </button>
              </div>
              <label class="instrument-checkbox">
                <input type="checkbox" id="use-track-name" />
                <span class="checkbox-housing">
                  <span class="checkbox-indicator"></span>
                </span>
                <span class="checkbox-label-text">USE GPX TRACK NAME</span>
              </label>
            </div>

            <input
              type="file"
              id="gpx-file-input"
              accept=".gpx"
              class="hidden"
            />

            <!-- Track Data Display -->
            <div id="track-info" class="data-readout-panel hidden">
              <div class="readout-label-plate">ROUTE DATA</div>
              <div class="data-readout-grid">
                <div class="data-readout-item">
                  <span class="readout-prefix">PTS</span>
                  <span class="readout-digits" id="track-points">0</span>
                </div>
                <div class="data-readout-item">
                  <span class="readout-prefix">DIST</span>
                  <span class="readout-digits" id="track-distance">0 km</span>
                </div>
                <div class="data-readout-item">
                  <span class="readout-prefix">WPT</span>
                  <span class="readout-digits" id="track-waypoints">0</span>
                </div>
              </div>
            </div>

            <!-- Simulate Button -->
            <div id="track-simulate-btn-container" class="hidden">
              <button
                id="track-simulate-btn"
                class="command-btn primary full-width"
              >
                <span class="btn-symbol">‚ñ∂</span>
                <span class="btn-label">SIMULATION MENU</span>
                <span class="btn-status-light"></span>
              </button>
            </div>
          </div>
        </section>

        <!-- Drive Navigation Panel -->
        <section class="panel-card instrument-panel hidden" id="drive-panel">
          <div class="instrument-clusters">
            <!-- Destination Entry -->
            <div class="input-cluster">
              <div class="cluster-label">DESTINATION</div>
              <div class="instrument-input-wrapper">
                <input
                  type="text"
                  id="drive-address-input"
                  class="instrument-input"
                  placeholder="ENTER ADDRESS OR COORDINATES..."
                />
                <span class="input-indicator"></span>
              </div>
              <div
                id="drive-address-results"
                class="instrument-results hidden"
              ></div>
            </div>

            <!-- Recent Destinations -->
            <div id="recent-destinations" class="recent-cluster hidden">
              <div class="cluster-label">RECENT</div>
              <div id="recent-destinations-list" class="recent-list"></div>
            </div>

            <!-- Selected Destination -->
            <div id="drive-destination" class="waypoint-display hidden">
              <div class="waypoint-marker dest">‚ñº</div>
              <div class="waypoint-info">
                <span class="waypoint-type">DEST</span>
                <span id="drive-dest-text" class="waypoint-name">--</span>
              </div>
              <button id="drive-clear-dest" class="waypoint-clear">√ó</button>
            </div>

            <!-- Starting Point -->
            <div id="starting-point-section" class="input-cluster hidden">
              <div class="cluster-label">
                ORIGIN <span class="label-hint">(OPTIONAL)</span>
              </div>
              <div class="instrument-input-wrapper">
                <input
                  type="text"
                  id="drive-start-input"
                  class="instrument-input"
                  placeholder="USE GPS POSITION IF EMPTY..."
                />
                <span class="input-indicator"></span>
              </div>
              <div
                id="drive-start-results"
                class="instrument-results hidden"
              ></div>

              <div id="recent-starts" class="recent-cluster hidden">
                <div id="recent-starts-list" class="recent-list"></div>
              </div>

              <div id="drive-start-point" class="waypoint-display hidden">
                <div class="waypoint-marker origin">‚ñ≤</div>
                <div class="waypoint-info">
                  <span class="waypoint-type">FROM</span>
                  <span id="drive-start-text" class="waypoint-name">--</span>
                </div>
                <button id="drive-clear-start" class="waypoint-clear">√ó</button>
              </div>
            </div>

            <!-- Calculate Button -->
            <button
              id="drive-calc-route"
              class="command-btn primary full-width"
              disabled
            >
              <span class="btn-symbol">‚ü≥</span>
              <span class="btn-label">CALCULATE ROUTE</span>
              <span class="btn-status-light"></span>
            </button>

            <!-- Route Data Display -->
            <div id="drive-route-preview" class="data-readout-panel hidden">
              <div class="readout-label-plate">ROUTE DATA</div>
              <div class="data-readout-grid">
                <div class="data-readout-item">
                  <span class="readout-prefix">DIST</span>
                  <span class="readout-digits" id="drive-route-distance"
                    >--</span
                  >
                </div>
                <div class="data-readout-item">
                  <span class="readout-prefix">ETE</span>
                  <span class="readout-digits" id="drive-route-time">--</span>
                </div>
                <div class="data-readout-item">
                  <span class="readout-prefix">TURN</span>
                  <span class="readout-digits" id="drive-route-turns">--</span>
                </div>
              </div>
            </div>

            <!-- Navigation Controls -->
            <div id="drive-nav-controls" class="command-grid hidden">
              <button id="drive-start-btn" class="command-btn primary">
                <span class="btn-symbol">‚ñ∂</span>
                <span class="btn-label">START NAV</span>
                <span class="btn-status-light"></span>
              </button>
              <button id="drive-simulate-btn" class="command-btn">
                <span class="btn-symbol">‚è©</span>
                <span class="btn-label">SIMULATE</span>
                <span class="btn-status-light"></span>
              </button>
              <button id="drive-show-route-btn" class="command-btn">
                <span class="btn-symbol">‚óé</span>
                <span class="btn-label">VIEW MAP</span>
                <span class="btn-status-light"></span>
              </button>
              <button id="drive-stop-btn" class="command-btn danger hidden">
                <span class="btn-symbol">‚ñ†</span>
                <span class="btn-label">STOP</span>
                <span class="btn-status-light"></span>
              </button>
            </div>

            <!-- Data Loading Status -->
            <div
              id="speedlimit-prefetch-status"
              class="loading-indicator hidden"
            >
              <div class="loading-header">
                <span class="loading-spinner"></span>
                <span class="loading-text">LOADING SPEED DATA</span>
              </div>
              <div class="loading-progress">
                <div class="progress-track">
                  <div id="speedlimit-prefetch-bar" class="progress-fill"></div>
                </div>
                <span class="progress-text" id="speedlimit-prefetch-text"
                  >0/0</span
                >
              </div>
              <span class="loading-detail" id="speedlimit-prefetch-segments"
                >0 SEGMENTS</span
              >
            </div>

            <div id="poi-prefetch-status" class="loading-indicator hidden">
              <div class="loading-header">
                <span class="loading-spinner"></span>
                <span class="loading-text">LOADING POI DATA</span>
              </div>
              <div class="loading-progress">
                <div class="progress-track">
                  <div id="poi-prefetch-bar" class="progress-fill"></div>
                </div>
                <span class="progress-text" id="poi-prefetch-text">0/0</span>
              </div>
              <span class="loading-detail" id="poi-prefetch-pois">0 POIS</span>
            </div>

            <div id="location-prefetch-status" class="loading-indicator hidden">
              <div class="loading-header">
                <span class="loading-spinner"></span>
                <span class="loading-text">LOADING LOCATION DATA</span>
              </div>
              <div class="loading-progress">
                <div class="progress-track">
                  <div id="location-prefetch-bar" class="progress-fill"></div>
                </div>
                <span class="progress-text" id="location-prefetch-text"
                  >0/0</span
                >
              </div>
              <span class="loading-detail" id="location-prefetch-locations"
                >0 CACHED</span
              >
            </div>
          </div>
        </section>

        <!-- Simulation Panel -->
        <section
          class="panel-card instrument-panel hidden"
          id="simulation-panel"
        >
          <div class="instrument-clusters">
            <!-- Speed Mode Selector -->
            <div class="mode-selector-cluster">
              <div class="cluster-label">SIMULATION SPEED</div>
              <div class="mode-buttons">
                <label class="mode-btn">
                  <input type="radio" name="sim-mode" value="car" checked />
                  <span class="mode-btn-face">
                    <span class="mode-icon">üöó</span>
                    <span class="mode-label">DRIVE</span>
                    <span class="mode-speed">100 KM/H</span>
                  </span>
                </label>
                <label class="mode-btn">
                  <input type="radio" name="sim-mode" value="bike" />
                  <span class="mode-btn-face">
                    <span class="mode-icon">üö¥</span>
                    <span class="mode-label">CYCLE</span>
                    <span class="mode-speed">25 KM/H</span>
                  </span>
                </label>
                <label class="mode-btn">
                  <input type="radio" name="sim-mode" value="foot" />
                  <span class="mode-btn-face">
                    <span class="mode-icon">üö∂</span>
                    <span class="mode-label">WALK</span>
                    <span class="mode-speed">5 KM/H</span>
                  </span>
                </label>
              </div>
              <select id="simulation-mode-select" class="hidden">
                <option value="car">Driving</option>
                <option value="bike">Bicycle</option>
                <option value="foot">Walking</option>
              </select>
            </div>

            <!-- Active Source Display -->
            <div id="simulation-source-info" class="source-display">
              <div class="source-display-label">ACTIVE ROUTE</div>
              <div class="source-display-content">
                <span class="source-icon">‚ñ∏</span>
                <span class="source-name" id="simulation-source-name"
                  >NO ROUTE SELECTED</span
                >
              </div>
            </div>

            <!-- Transport Controls -->
            <div id="simulation-controls" class="transport-controls">
              <div class="transport-btn-row">
                <button
                  id="start-simulation-btn"
                  class="transport-btn play"
                  disabled
                >
                  <span class="transport-icon">‚ñ∂</span>
                  <span class="transport-label">START</span>
                </button>
                <button
                  id="pause-simulation-btn"
                  class="transport-btn pause hidden"
                >
                  <span class="transport-icon">‚è∏</span>
                  <span class="transport-label">PAUSE</span>
                </button>
                <button
                  id="stop-simulation-btn"
                  class="transport-btn stop hidden"
                >
                  <span class="transport-icon">‚ñ†</span>
                  <span class="transport-label">STOP</span>
                </button>
              </div>
            </div>

            <!-- Navigation Status Display -->
            <div id="drive-nav-status" class="nav-status-display hidden">
              <div class="nav-status-header">
                <span class="nav-state-indicator active"></span>
                <span class="nav-state-text" id="drive-nav-state"
                  >NAVIGATING</span
                >
              </div>

              <div class="turn-display">
                <div class="turn-icon-large" id="drive-turn-icon">‚Üí</div>
                <div class="turn-info">
                  <span class="turn-distance" id="drive-turn-distance">--</span>
                  <span class="turn-instruction" id="drive-instruction"
                    >--</span
                  >
                </div>
              </div>

              <div class="nav-progress-display">
                <div class="progress-track">
                  <div id="drive-progress-bar" class="progress-fill"></div>
                </div>
              </div>

              <div class="nav-data-row">
                <div class="nav-data-item">
                  <span class="nav-data-label">DIST</span>
                  <span class="nav-data-value" id="drive-distance-remaining"
                    >--</span
                  >
                </div>
                <div class="nav-data-item">
                  <span class="nav-data-label">ETE</span>
                  <span class="nav-data-value" id="drive-remaining">--</span>
                </div>
              </div>
            </div>

            <!-- Simulation Progress -->
            <div id="simulation-status" class="sim-progress-display hidden">
              <div class="sim-progress-header">
                <span class="progress-label">SIMULATION PROGRESS</span>
                <span class="progress-percent" id="sim-progress">0%</span>
              </div>
              <div class="progress-track large">
                <div id="sim-progress-bar" class="progress-fill animated"></div>
              </div>
              <div class="sim-data-row">
                <div class="sim-data-item">
                  <span class="sim-data-label">DIST</span>
                  <span class="sim-data-value" id="sim-distance">--</span>
                </div>
                <div class="sim-data-item">
                  <span class="sim-data-label">TIME</span>
                  <span class="sim-data-value" id="sim-remaining">--</span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Display Controls Panel -->
        <section
          class="panel-card instrument-panel hidden"
          id="display-controls-panel"
        >
          <div class="instrument-clusters">
            <!-- Zoom Level Control - Horizontal Slider -->
            <div class="zoom-control-cluster">
              <div class="cluster-label">ZOOM LEVEL</div>
              <div class="zoom-slider-container">
                <button
                  id="zoom-out-btn"
                  class="zoom-step-btn decrease"
                  aria-label="Decrease zoom"
                >
                  <span class="zoom-step-icon">‚àí</span>
                </button>
                <div class="zoom-slider-track">
                  <div class="zoom-slider-fill" id="zoom-fill"></div>
                  <div class="zoom-slider-markers">
                    <span class="zoom-marker" data-level="1"></span>
                    <span class="zoom-marker" data-level="5"></span>
                    <span class="zoom-marker" data-level="10"></span>
                    <span class="zoom-marker" data-level="15"></span>
                    <span class="zoom-marker" data-level="20"></span>
                  </div>
                  <div class="zoom-slider-labels">
                    <span class="zoom-label">1</span>
                    <span class="zoom-label">5</span>
                    <span class="zoom-label">10</span>
                    <span class="zoom-label">15</span>
                    <span class="zoom-label">20</span>
                  </div>
                  <input
                    type="range"
                    id="zoom-control"
                    min="1"
                    max="20"
                    value="14"
                    class="zoom-slider-input"
                  />
                </div>
                <button
                  id="zoom-in-btn"
                  class="zoom-step-btn increase"
                  aria-label="Increase zoom"
                >
                  <span class="zoom-step-icon">+</span>
                </button>
              </div>
              <div class="zoom-readout">
                <span class="zoom-readout-value" id="zoom-value">14</span>
              </div>
            </div>

            <!-- Switch Panel - Display Mode -->
            <div class="switch-panel">
              <div class="switch-cluster">
                <div class="switch-label-plate">THEME</div>
                <button id="theme-btn" class="rocker-switch" data-state="dark">
                  <span class="rocker-option dark">DUSK</span>
                  <span class="rocker-indicator"></span>
                  <span class="rocker-option light">DAWN</span>
                </button>
              </div>

              <div class="switch-cluster">
                <div class="switch-label-plate">MODE</div>
                <button
                  id="screen-mode-btn"
                  class="rocker-switch"
                  data-state="track"
                >
                  <span class="rocker-option track">MAP</span>
                  <span class="rocker-indicator"></span>
                  <span class="rocker-option turn_by_turn">NAV</span>
                </button>
                <select id="screen-select" class="hidden-select">
                  <option value="track">Track (Map + Info)</option>
                  <option value="turn_by_turn">Turn-by-Turn</option>
                </select>
              </div>

              <div class="switch-cluster">
                <div class="switch-label-plate">ORIENT</div>
                <button
                  id="orientation-btn"
                  class="rocker-switch"
                  data-state="north"
                >
                  <span class="rocker-option north">N‚Üë</span>
                  <span class="rocker-indicator"></span>
                  <span class="rocker-option track">TRK</span>
                </button>
              </div>

              <div class="switch-cluster">
                <div class="switch-label-plate">UNITS</div>
                <button
                  id="speed-unit-btn"
                  class="rocker-switch"
                  data-state="kmh"
                >
                  <span class="rocker-option kmh">KM/H</span>
                  <span class="rocker-indicator"></span>
                  <span class="rocker-option mph">MPH</span>
                </button>
              </div>
            </div>

            <!-- Toggle Bank - System Switches -->
            <div class="toggle-bank">
              <div class="bank-label-plate">SYSTEM</div>
              <div class="toggle-row">
                <label class="aviation-toggle">
                  <input
                    type="checkbox"
                    id="auto-center"
                    checked
                    class="toggle-input"
                  />
                  <span class="toggle-housing">
                    <span class="toggle-lever"></span>
                  </span>
                  <span class="toggle-nameplate">AUTO CTR</span>
                  <span class="toggle-indicator"></span>
                </label>

                <label class="aviation-toggle">
                  <input
                    type="checkbox"
                    id="show-location-name"
                    checked
                    class="toggle-input"
                  />
                  <span class="toggle-housing">
                    <span class="toggle-lever"></span>
                  </span>
                  <span class="toggle-nameplate">LOC NAME</span>
                  <span class="toggle-indicator"></span>
                </label>

                <label class="aviation-toggle">
                  <input
                    type="checkbox"
                    id="show-roads"
                    checked
                    class="toggle-input"
                  />
                  <span class="toggle-housing">
                    <span class="toggle-lever"></span>
                  </span>
                  <span class="toggle-nameplate">ROADS</span>
                  <span class="toggle-indicator"></span>
                </label>
              </div>
            </div>

            <!-- Action Buttons - Command Panel -->
            <div class="command-panel">
              <div class="command-label-plate">COMMANDS</div>
              <div class="command-buttons">
                <button id="clear-btn" class="command-btn">
                  <span class="btn-symbol">‚úï</span>
                  <span class="btn-label">CLEAR</span>
                  <span class="btn-status-light"></span>
                </button>
              </div>
            </div>

            <!-- POI Panel - Waypoint Markers -->
            <div class="poi-panel">
              <div class="poi-label-plate">WAYPOINT MARKERS</div>
              <div class="poi-indicator-row">
                <label class="poi-indicator">
                  <input
                    type="checkbox"
                    id="poi-fuel"
                    class="poi-toggle"
                    data-category="fuel"
                    checked
                  />
                  <span class="indicator-lamp fuel"></span>
                  <span class="indicator-label">FUEL</span>
                </label>
                <label class="poi-indicator">
                  <input
                    type="checkbox"
                    id="poi-parking"
                    class="poi-toggle"
                    data-category="parking"
                    checked
                  />
                  <span class="indicator-lamp parking"></span>
                  <span class="indicator-label">PARK</span>
                </label>
                <label class="poi-indicator">
                  <input
                    type="checkbox"
                    id="poi-food"
                    class="poi-toggle"
                    data-category="food"
                    checked
                  />
                  <span class="indicator-lamp food"></span>
                  <span class="indicator-label">FOOD</span>
                </label>
                <label class="poi-indicator">
                  <input
                    type="checkbox"
                    id="poi-restroom"
                    class="poi-toggle"
                    data-category="restroom"
                    checked
                  />
                  <span class="indicator-lamp restroom"></span>
                  <span class="indicator-label">REST</span>
                </label>
                <label class="poi-indicator">
                  <input
                    type="checkbox"
                    id="poi-viewpoint"
                    class="poi-toggle"
                    data-category="viewpoint"
                    checked
                  />
                  <span class="indicator-lamp viewpoint"></span>
                  <span class="indicator-label">VIEW</span>
                </label>
              </div>
            </div>
          </div>
        </section>

        <!-- WiFi Settings Panel -->
        <section
          class="panel-card instrument-panel hidden"
          id="wifi-settings-panel"
        >
          <div class="instrument-clusters">
            <div class="config-description">
              Configure mobile hotspot connection for data link.
            </div>

            <!-- SSID Input -->
            <div class="input-cluster">
              <div class="cluster-label">NETWORK SSID</div>
              <div class="instrument-input-wrapper">
                <input
                  type="text"
                  id="wifi-ssid"
                  class="instrument-input"
                  placeholder="ENTER NETWORK NAME..."
                  maxlength="32"
                />
                <span class="input-indicator"></span>
              </div>
            </div>

            <!-- Password Input -->
            <div class="input-cluster">
              <div class="cluster-label">SECURITY KEY</div>
              <div class="instrument-input-wrapper password">
                <input
                  type="password"
                  id="wifi-password"
                  class="instrument-input"
                  placeholder="MIN 8 CHARACTERS..."
                  minlength="8"
                />
                <button
                  type="button"
                  id="toggle-password"
                  class="input-toggle-btn"
                >
                  <span class="toggle-icon">‚óâ</span>
                </button>
              </div>
            </div>

            <!-- Current Status -->
            <div class="status-readout">
              <span class="status-label">CURRENT:</span>
              <span class="status-value" id="wifi-current-ssid"
                >NOT CONFIGURED</span
              >
            </div>

            <!-- Save Button -->
            <button id="save-wifi-btn" class="command-btn primary full-width">
              <span class="btn-symbol">‚úì</span>
              <span class="btn-label">SAVE CONFIGURATION</span>
              <span class="btn-status-light"></span>
            </button>
          </div>
        </section>

        <!-- Reset Panel -->
        <section class="panel-card instrument-panel hidden" id="reset-panel">
          <div class="instrument-clusters">
            <!-- Warning Display -->
            <div class="warning-display">
              <div class="warning-lamp">
                <span class="lamp-glow"></span>
                <span class="lamp-icon">‚ö†</span>
              </div>
              <div class="warning-content">
                <div class="warning-title">CAUTION: FACTORY RESET</div>
                <div class="warning-details">
                  This will clear all configuration:
                  <ul class="warning-list">
                    <li>COMM SETTINGS</li>
                    <li>DISPLAY PREFERENCES</li>
                    <li>ZOOM AND TRACK DATA</li>
                    <li>RECENT FILES</li>
                  </ul>
                  Connection will be terminated.
                </div>
              </div>
            </div>

            <!-- Reset Button -->
            <button
              id="reset-btn"
              class="command-btn danger full-width guarded"
            >
              <span class="btn-symbol">‚Ü∫</span>
              <span class="btn-label">EXECUTE RESET</span>
              <span class="btn-status-light"></span>
            </button>
          </div>
        </section>

        <!-- Mock Display Panel -->
        <section
          class="panel-card instrument-panel hidden"
          id="mock-display-panel"
        >
          <div class="instrument-clusters">
            <div class="config-description">
              Live preview of e-paper display output. Auto-updates on changes.
              Development mode only.
            </div>

            <!-- Display Preview -->
            <div class="display-preview-frame">
              <div class="preview-bezel">
                <div id="mock-display-container" class="preview-screen">
                  <div id="mock-display-status" class="preview-status">
                    CHECKING AVAILABILITY...
                  </div>
                  <img
                    id="mock-display-image"
                    class="preview-image hidden"
                    alt="E-Paper Display Preview"
                  />
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>

      <!-- Connection Status -->
      <div class="connection-bar">
        <div id="connection-indicator" class="connection-status disconnected">
          <span class="connection-dot"></span>
          <span id="connection-text">Connecting...</span>
        </div>
      </div>

      <!-- System Messages Toast -->
      <div id="system-messages" class="toast-container">
        <div id="message-indicator" class="toast hidden">
          <span class="toast-icon"></span>
          <span id="message-text">System Message</span>
        </div>
      </div>

      <footer class="footer">
        <p>Papertrail GPS Tracker ¬© 2025</p>
      </footer>
    </div>

    <!-- Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <!-- Leaflet JS for drive navigation map -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
